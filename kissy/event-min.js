/*
Copyright 2011, KISSY UI Library v1.20dev
MIT Licensed
build time: Jul 21 14:27
*/
KISSY.add("event/base",function(o,c,h,j){function n(a,e,m){if((m=o.trim(m))&&m.indexOf(r)>0){var q=o.makeArray(arguments);o.each(m.split(r),function(u){var b=o.clone(q);b.splice(0,3,e,u);k[a].apply(k,b)});return true}return j}function f(a){return a&&a.nodeType!==3&&a.nodeType!==8}function l(a,e,m,q,u){var b=k.special[e]||{};if(!q.length&&(!b.setup||b.setup.call(a)===false))i(a,e,m);b.add&&b.add.call(a,u)}var d=document,i=d.addEventListener?function(a,e,m,q){a.addEventListener&&a.addEventListener(e,
m,!!q)}:function(a,e,m){a.attachEvent&&a.attachEvent("on"+e,m)},v=d.removeEventListener?function(a,e,m,q){a.removeEventListener&&a.removeEventListener(e,m,!!q)}:function(a,e,m){a.detachEvent&&a.detachEvent("on"+e,m)},r=" ",w="",g="trigger-none-"+o.now(),s="ksEventTargetId"+o.now(),k={_data:function(){var a=o.makeArray(arguments);a.splice(1,0,s);return c.data.apply(c,a)},_removeData:function(){var a=o.makeArray(arguments);a.splice(1,0,s);return c.removeData.apply(c,a)},special:{},add:function(a,e,
m,q,u){if(n("add",a,e,m,q,u))return a;c.query(a).each(function(b){var t=!b.isCustomEventTarget,p;if(!(!b||!e||!o.isFunction(m)||t&&!f(b))){(p=k._data(b))||k._data(b,p={});var A=p.events=p.events||{};A=A[e]=A[e]||[];var y={fn:m,scope:q||b,data:u},z=p.handler;if(!z){z=p.handler=function(x,B){if(!(x&&x.type==w)){var D=z.target;if(!x||!x.fixed)x=new h(D,x);o.isPlainObject(B)&&o.mix(x,B);return k._handle(D,x)}};z.target=b}if(t){l(b,e,z,A,y);b=null}A.push(y)}});return a},__getListeners:function(a,e){return(k.__getEvents(a)||
{})[e]||[]},__getEvents:function(a){return(a=k._data(a))&&a.events},remove:function(a,e,m,q,u){if(n("remove",a,e,m,q))return a;c.query(a).each(function(b){var t=k._data(b),p=t&&t.events,A,y,z,x,B,D=!b.isCustomEventTarget,F=D&&k.special[e]||{};if(!(!b||!D&&!f(b)||!p))if(e===j)for(e in p)k.remove.call(k,b,e);else{q=q||b;if(A=p[e]){y=A.length;if(m&&y){x=z=0;for(B=[];z<y;++z){var G=false,C=A[z];if(m!==C.fn||q!==C.scope){B[x++]=C;G=true}else if(u!==E){var E=C.data;if(!u&&E||E&&!u){B[x++]=C;G=true}else if(u&&
E)if(u.equals&&E.equals)if(!E.equals(u)){B[x++]=C;G=true}}!G&&F.remove&&F.remove.call(b,C)}p[e]=B;y=B.length}if(m===j||y===0){if(D&&(!F.tearDown||F.tearDown.call(b)===false))v(b,e,t.handler);delete p[e]}}if(o.isEmptyObject(p)){t.handler.target=null;delete t.handler;delete t.events;k._removeData(b)}}});return a},_handle:function(a,e){for(var m=k.__getListeners(a,e.type).slice(0),q,u,b=0,t=m.length;b<t;++b){q=m[b];q=q.fn.call(q.scope,e,q.data);if(q!==j){if(u!==false)u=q;q===false&&e.halt()}if(e.isImmediatePropagationStopped)break}return u},
fire:function(a,e,m,q){if(!n("fire",a,e,m)){var u;c.query(a).each(function(b){var t=!b.isCustomEventTarget;m=m||{};m.type=e;if(t){var p=m,A;if(f(b)){t=new h(b);o.mix(t,p);if(q){t.stopPropagation();t.preventDefault()}p=t.target=b;var y="on"+e;do{var z=(k._data(p)||{}).handler;t.currentTarget=p;z&&z.call(p,t);if(p[y]&&p[y].call(p)===false){A=false;t.preventDefault()}p=p.parentNode||p.ownerDocument||p===b.ownerDocument&&window}while(p&&!t.isPropagationStopped);if(!t.isDefaultPrevented)if(!(e==="click"&&
b.nodeName.toLowerCase()=="a")){var x;try{if(y&&b[e]){if(x=b[y])b[y]=null;w=e;b[e]()}}catch(B){}if(x)b[y]=x;w=g}}b=A;if(b!==j)u=b}else if((b=k._data(b))&&o.isFunction(b.handler))u=b.handler(j,m)});return u}},_batchForType:n,_simpleAdd:i,_simpleRemove:v};k.on=k.add;k.detach=k.remove;return k},{requires:["dom","event/object"]});
KISSY.add("event/delegate",function(o,c,h){function j(d){return d.fn===undefined&&d.selector===undefined?true:d.fn===undefined?this.selector==d.selector:this.fn==d.fn&&this.selector==d.selector&&this.scope==d.scope}function n(d,i){var v,r=c.closest(d.target,[i.selector],this);if(r)for(var w=0;w<r.length;w++){d.currentTarget=r[w];var g=i.fn.call(i.scope||this,d);if(g===false||d.isPropagationStopped||d.isImmediatePropagationStopped){if(g===false)v=g;if(d.isPropagationStopped||d.isImmediatePropagationStopped)break}}return v}
var f=h._batchForType,l={focus:"focusin",blur:"focusout"};o.mix(h,{delegate:function(d,i,v,r,w){if(f("delegate",d,i,v,r,w))return d;c.query(d).each(function(g){if(!g.isCustomEventTarget){i=l[i]||i;h.on(g,i,n,g,{fn:r,selector:v,scope:w,equals:j})}});return d},undelegate:function(d,i,v,r,w){if(f("undelegate",d,i,v,r,w))return d;c.query(d).each(function(g){if(!g.isCustomEventTarget){i=l[i]||i;h.remove(g,i,n,g,{fn:r,selector:v,scope:w,equals:j})}});return d}});return h},{requires:["dom","./base"]});
KISSY.add("event/focusin",function(o,c,h){c.ie||o.each([{name:"focusin",fix:"focus"},{name:"focusout",fix:"blur"}],function(j){function n(l){return h.fire(l.target,j.name)}var f=0;h.special[j.name]={setup:function(){f++===0&&document.addEventListener(j.fix,n,true)},tearDown:function(){--f===0&&document.removeEventListener(j.fix,n,true)}}});return h},{requires:["ua","./base"]});
KISSY.add("event/hashchange",function(o,c,h,j){j=f||j.ie;if(!("onhashchange"in window)||j<8){var n=window,f=document.documentMode,l=function(){return"#"+location.href.replace(/^[^#]*#?(.*)$/,"$1")},d,i=l(),v=function(){var k=l();if(k!==i){r(k);i=k}d=setTimeout(v,50)},r=j<8?function(k){k="<html><body>"+k+"</body></html>";var a=s.contentWindow.document;try{a.open();a.write(k);a.close();return true}catch(e){return false}}:function(){c.fire(n,"hashchange")},w=function(){d||v()},g=function(){d&&clearTimeout(d);
d=null},s;if(j<8){w=function(){if(!s){s=h.create('<iframe style="display: none" height="0" width="0" tabindex="-1" title="empty"/>');h.prepend(s,document.documentElement);c.add(s,"load",function(){c.remove(s,"load");r(l());c.add(s,"load",k);v()});var k=function(){var a=o.trim(s.contentWindow.document.body.innerHTML),e=l();if(a!=e)i=location.hash=a;c.fire(n,"hashchange")}}};g=function(){d&&clearTimeout(d);d=null;c.detach(s);h.remove(s);s=null}}c.special.hashchange={setup:function(){this===n&&w()},
tearDown:function(){this===n&&g()}}}},{requires:["./base","dom","ua"]});
KISSY.add("event/mouseenter",function(o,c,h,j){j.ie||o.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(n){function f(l){var d=this,i=l.relatedTarget;l.type=n.name;try{if(!(i&&i!==document&&!i.parentNode)){i=h.closest(i,function(r){return r==d});i!==d&&c._handle(d,l)}}catch(v){}}c.special[n.name]={setup:function(){c.add(this,n.fix,f)},tearDown:function(){c.remove(this,n.fix,f)}}});return c},{requires:["./base","dom","ua"]});
KISSY.add("event/object",function(o,c){function h(f,l,d){this.currentTarget=f;this.originalEvent=l||{};if(l){this.type=l.type;this._fix()}else{this.type=d;this.target=f}this.currentTarget=f;this.fixed=true}var j=document,n="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" ");
o.augment(h,{_fix:function(){var f=this.originalEvent,l=n.length,d,i=this.currentTarget;for(i=i.nodeType===9?i:i.ownerDocument||j;l;){d=n[--l];this[d]=f[d]}if(!this.target)this.target=this.srcElement||j;if(this.target.nodeType===3)this.target=this.target.parentNode;if(!this.relatedTarget&&this.fromElement)this.relatedTarget=this.fromElement===this.target?this.toElement:this.fromElement;if(this.pageX===c&&this.clientX!==c){f=i.documentElement;l=i.body;this.pageX=this.clientX+(f&&f.scrollLeft||l&&l.scrollLeft||
0)-(f&&f.clientLeft||l&&l.clientLeft||0);this.pageY=this.clientY+(f&&f.scrollTop||l&&l.scrollTop||0)-(f&&f.clientTop||l&&l.clientTop||0)}if(this.which===c)this.which=this.charCode!==c?this.charCode:this.keyCode;if(this.metaKey===c)this.metaKey=this.ctrlKey;if(!this.which&&this.button!==c)this.which=this.button&1?1:this.button&2?3:this.button&4?2:0},preventDefault:function(){var f=this.originalEvent;if(f.preventDefault)f.preventDefault();else f.returnValue=false;this.isDefaultPrevented=true},stopPropagation:function(){var f=
this.originalEvent;if(f.stopPropagation)f.stopPropagation();else f.cancelBubble=true;this.isPropagationStopped=true},stopImmediatePropagation:function(){var f=this.originalEvent;f.stopImmediatePropagation?f.stopImmediatePropagation():this.stopPropagation();this.isImmediatePropagationStopped=true},halt:function(f){f?this.stopImmediatePropagation():this.stopPropagation();this.preventDefault()}});return h});
KISSY.add("event/target",function(o,c){return{isCustomEventTarget:true,fire:function(h,j){return c.fire(this,h,j)},on:function(h,j,n){c.add(this,h,j,n);return this},detach:function(h,j,n){c.remove(this,h,j,n);return this}}},{requires:["./base","dom"]});
KISSY.add("event/valuechange",function(o,c,h){function j(g){h.removeData(g,v);if(h.hasData(g,r)){var s=h.data(g,r);clearTimeout(s);h.removeData(g,r)}}function n(g){j(g.target)}function f(g){h.hasData(g,r)||h.data(g,r,setTimeout(function(){var s=g.value,k=h.data(g,v);if(s!==k){c.fire(g,i,{prevVal:k,newVal:s},true);h.data(g,v,s)}h.data(g,r,setTimeout(arguments.callee,w))},w))}function l(g){var s=g.target;g.type=="focus"&&h.data(s,v,s.value);f(s)}function d(g){j(g);c.remove(g,"blur",n);c.remove(g,"mousedown keyup keydown focus",
l)}var i="valuechange",v="event/valuechange/history",r="event/valuechange/poll",w=50;c.special[i]={setup:function(){var g=this.nodeName.toLowerCase();if("input"==g||"textarea"==g){d(this);c.on(this,"blur",n);c.on(this,"mousedown keyup keydown focus",l)}},tearDown:function(){d(this)}};return c},{requires:["./base","dom"]});
KISSY.add("event",function(o,c,h,j){c.Target=h;c.Object=j;return c},{requires:["event/base","event/target","event/object","event/focusin","event/hashchange","event/valuechange","event/delegate","event/mouseenter"]});
