KISSY.Editor.add("focusmanager",function(g){function h(){this.iframeFocus=true;f=this}function i(){this.iframeFocus=false;f=null}var d=KISSY,j=d.DOM,e=d.Event;d={};var c={},f;d={refreshAll:function(){for(var a in c){var b=c[a];b.document.designMode="off";b.document.designMode="on"}},currentInstance:function(){return f},getInstance:function(a){return c[a]},add:function(a){var b=j._4e_getWin(a.document);e.on(b,"focus",h,a);e.on(b,"blur",i,a)},register:function(a){c[a._UUID]=a},remove:function(a){delete c[a._UUID];
var b=j._4e_getWin(a.document);e.remove(b,"focus",h,a);e.remove(b,"blur",i,a)}};g.focusManager=d;g.getInstances=function(){return c}});
