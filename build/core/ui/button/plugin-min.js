KISSY.Editor.add("button",function(){var e=KISSY,h=e.Editor;if(h.TripleButton)e.log("TripleButton attach twice","warn");else{var c=e.UIBase.create([e.UIBase.Box],{bindUI:function(){var a=this,b=a.get("el");b.on("click",a._action,a);b.on("mousedown",function(){a.get("state")=="off"&&b.addClass("ke-triplebutton-active")});b.on("mouseup mouseleave",function(){a.get("state")=="off"&&b.hasClass("ke-triplebutton-active")&&setTimeout(function(){b.removeClass("ke-triplebutton-active")},300)})},_uiSetTitle:function(){this.get("el").attr("title",
this.get("title"))},_uiSetContentCls:function(a){var b=this.get("el");if(a!==undefined){b.html("<span class='ke-toolbar-item "+a+"'>");b._4e_unselectable()}},_uiSetText:function(a){var b=this.get("el");a!==undefined&&b.html(a)},_uiSetState:function(a){this["_"+a]()},disable:function(){this._savedState=this.get("state");this.set("state","disabled")},enable:function(){this.get("state")=="disabled"&&this.set("state",this._savedState)},_action:function(a){this.fire(this.get("state")+"Click",a);a.type=
this.get("state")+"Click";this.fire("click",a);a.preventDefault()},bon:function(){this.set("state","on")},boff:function(){this.set("state","off")},_on:function(){var a=this.get("el");a.removeClass("ke-triplebutton-off ke-triplebutton-disabled");a.addClass("ke-triplebutton-on")},_off:function(){var a=this.get("el");a.removeClass("ke-triplebutton-on ke-triplebutton-disabled");a.addClass("ke-triplebutton-off")},_disabled:function(){var a=this.get("el");a.removeClass("ke-triplebutton-off ke-triplebutton-on");
a.addClass("ke-triplebutton-disabled")}},{ATTRS:{state:{value:"off"},elCls:{value:"ke-triplebutton ke-triplebutton-off"},elAttrs:{value:{hideFocus:true,tabIndex:-1}},elTagName:{value:"a"},title:{},contentCls:{},text:{}}});c.ON="on";c.OFF="off";c.DISABLED="disabled";c.ON_CLASS="ke-triplebutton-on";c.OFF_CLASS="ke-triplebutton-off";c.DISABLED_CLASS="ke-triplebutton-disabled";h.TripleButton=c;h.prototype.addButton=function(a,b){var f=this,d=new c({render:f.toolBarDiv,autoRender:true,title:b.title,text:b.text,
contentCls:b.contentCls}),g={btn:d,editor:f,cfg:b,call:function(){var i=e.makeArray(arguments),j=i.shift();return b[j].apply(g,i)},reload:function(i){e.mix(b,i);d.enable();f.on("selectionChange",function(){f.getMode()!=h.SOURCE_MODE&&b.selectionChange&&b.selectionChange.apply(g,arguments)});d.on("click",function(j){var k=j.type;b[k]&&b[k].apply(g,arguments)});if(b.mode==h.WYSIWYG_MODE){f.on("wysiwygmode",d.enable,d);f.on("sourcemode",d.disable,d)}b.init&&b.init.call(g)}};b.loading?d.disable():g.reload(undefined);
return g}}});
