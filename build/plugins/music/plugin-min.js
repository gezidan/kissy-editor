KISSY.Editor.add("music",function(e){var d=KISSY.Editor,c=e.htmlDataProcessor,g=c&&c.dataFilter;e.ready(function(){g&&g.addRules({elements:{object:function(a){var b=a.attributes;if(!(b.classid&&String(b.classid).toLowerCase())){for(b=0;b<a.children.length;b++)if(a.children[b].name=="embed"){if(!d.Utils.isFlashEmbed(a.children[b]))break;if(a.children[b].attributes.src.indexOf("niftyplayer.swf")!=-1)return c.createFakeParserElement(a,"ke_music","music",true)}return null}for(b=0;b<a.children.length;b++){var f=
a.children[b];if(f.name=="param"&&f.attributes.name=="movie")if(f.attributes.value.indexOf("niftyplayer.swf")!=-1)return c.createFakeParserElement(a,"ke_music","music",true)}},embed:function(a){if(!d.Utils.isFlashEmbed(a))return null;if(a.attributes.src.indexOf("niftyplayer.swf")!=-1)return c.createFakeParserElement(a,"ke_music","music",true)}}},4);d.use("music/support",function(){new d.MusicInserter(e)})})});
