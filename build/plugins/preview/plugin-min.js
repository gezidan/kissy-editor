KISSY.Editor.add("preview",function(e){var c=KISSY.Editor,i=KISSY,j=c.TripleButton;c.Preview||function(){function f(a){this.editor=a;this._init()}i.augment(f,{_init:function(){this.el=new j({container:this.editor.toolBarDiv,title:"预览",contentCls:"ke-toolbar-preview"});this.el.on("offClick",this._show,this)},_show:function(){var a=this.editor,b=640,g=420,h=80;try{var d=window.screen;b=Math.round(d.width*0.8);g=Math.round(d.height*0.7);h=Math.round(d.width*0.1)}catch(k){}a=a._prepareIFrameHtml(null,
a.cfg.customStyle).replace(/<body[^>]+>.+<\/body>/,"<body>\n"+a.getData()+"\n</body>").replace(/\${title}/,"预览");b=window.open("",null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+b+",height="+g+",left="+h);b.document.open();b.document.write(a);b.document.close();b.focus()}});c.Preview=f}();e.addPlugin(function(){new c.Preview(e)})});
