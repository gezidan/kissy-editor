KISSY.Editor.add("templates",function(j){var a=KISSY.Editor,f=KISSY,l=f.Node,m=f.DOM,g=a.TripleButton,n=a.SimpleOverlay;a.TplUI||function(){function k(b){this.editor=b;this._init()}m.addStyleSheet(".ke-tpl {    border: 2px solid #EEEEEE;    width: 95%;    margin: 20px auto 0 auto;}.ke-tpl-list {    border: 1px solid #EEEEEE;    margin: 5px;    padding: 7px;    display: block;    text-decoration: none;    zoom: 1;}.ke-tpl-list:hover, .ke-tpl-selected {    background-color: #FFFACD;    text-decoration: none;    border: 1px solid #FF9933;}",
"ke-templates");f.augment(k,{_init:function(){var b=this.editor,c=new g({container:b.toolBarDiv,contentCls:"ke-toolbar-template",title:"\u6a21\u677f"});c.on("offClick",this._show,this);a.Utils.lazyRun(this,"_prepare","_real");this.el=c;a.Utils.sourceDisable(b,this)},disable:function(){this.el.set("state",g.DISABLED)},enable:function(){this.el.set("state",g.OFF)},_prepare:function(){for(var b=this.editor,c=b.cfg.pluginConfig.templates||[],h="<div class='ke-tpl'>",i=0;i<c.length;i++)h+="<a href='javascript:void(0)' class='ke-tpl-list' tabIndex='-1'>"+
c[i].demo+"</a>";h+="</div>";this._initDialogOk=true;var e=new n({mask:true,title:"\u5185\u5bb9\u6a21\u677f"});e.body.html(h);e.body.all(".ke-tpl-list").on("click",function(d){d.halt();d=(new l(d.target))._4e_index();d!=-1&&b.insertHtml(c[d].html);e.hide()});this.ui=e},_real:function(){this.ui.show()},_show:function(){this._prepare()}});a.TplUI=k}();j.addPlugin(function(){new a.TplUI(j)})});
