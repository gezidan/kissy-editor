KISSY.Editor.add("templates",function(i){var a=KISSY.Editor,j=KISSY,l=j.Node,f=a.TripleButton,m=a.SimpleOverlay;a.TplUI||function(){function k(b){this.editor=b;this._init()}j.augment(k,{_init:function(){var b=this.editor,c=new f({container:b.toolBarDiv,contentCls:"ke-toolbar-template",title:"模板"});c.on("offClick",this._show,this);a.Utils.lazyRun(this,"_prepare","_real");this.el=c;a.Utils.sourceDisable(b,this)},disable:function(){this.el.set("state",f.DISABLED)},enable:function(){this.el.set("state",
f.OFF)},_prepare:function(){for(var b=this.editor,c=b.cfg.pluginConfig.templates||[],g="<div class='ke-tpl'>",h=0;h<c.length;h++)g+="<a href='javascript:void(0)' class='ke-tpl-list' tabIndex='-1'>"+c[h].demo+"</a>";g+="</div>";this._initDialogOk=true;var e=new m({mask:true,title:"内容模板"});e.body.html(g);e.body.all(".ke-tpl-list").on("click",function(d){d.halt();d=(new l(d.target))._4e_index();d!=-1&&b.insertHtml(c[d].html);e.hide()});this.ui=e},_real:function(){this.ui.show()},_show:function(){this._prepare()}});
a.TplUI=k}();i.addPlugin(function(){new a.TplUI(i)})});
