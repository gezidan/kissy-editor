KISSY.Editor.add("font",function(e){var c=KISSY.Editor,j=KISSY,l=c.Style,m=c.TripleButton,y=j.Node,p=e.cfg.pluginConfig["font-size"]||{};j.mix(p,{items:function(g){for(var k=[],h=0;h<g.length;h++)k.push({name:g[h],value:g[h]});return k}(["8px","10px","12px","14px","18px","24px","36px","48px","60px","72px","84px","96px","108px"]),width:"55px"},false);var t={},u=[],n={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]},q=e.cfg.pluginConfig["font-family"]||
{};j.mix(q,{items:[{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"隶书",value:"LiSu"},{name:"楷体",value:"KaiTi_GB2312"},{name:"微软雅黑",value:"Microsoft YaHei"},{name:"Georgia",value:"Georgia"},{name:"Times New Roman",value:"Times New Roman"},{name:"Impact",value:"Impact"},{name:"Courier New",value:"Courier New"},{name:"Arial",value:"Arial"},{name:"Verdana",value:"Verdana"},{name:"Tahoma",value:"Tahoma"}],width:"130px"},false);var v={},w=[],z={element:"span",styles:{"font-family":"#(family)"},
overrides:[{element:"font",attributes:{face:null}}]},i;e.cfg.pluginConfig["font-size"]=p;e.cfg.pluginConfig["font-family"]=q;for(i=0;i<p.items.length;i++){var f=p.items[i],s=f.name,o=f.attrs;f=f.value;t[f]=new l(n,{size:f});u.push({name:s,value:f,attrs:o})}for(i=0;i<q.items.length;i++){f=q.items[i];s=f.name;o=f.attrs||{};n=f.value;o.style=o.style||"";o.style+=";font-family:"+n;v[n]=new l(z,{family:n});w.push({name:s,value:n,attrs:o})}c.Font||function(){function g(a){g.superclass.constructor.call(this,
a);this._init()}function k(a){k.superclass.constructor.call(this,a);this._init()}g.ATTRS={title:{},html:{},styles:{},editor:{}};var h=c.Select;j.extend(g,j.Base,{_init:function(){var a=this.get("editor"),b=a.toolBarDiv;this.get("html");this.el=new h({container:b,doc:a.document,width:this.get("width"),popUpWidth:this.get("popUpWidth"),title:this.get("title"),items:this.get("html"),showValue:this.get("showValue"),menuContainer:new y(document.body)});this.el.on("click",this._vChange,this);a.on("selectionChange",
this._selectionChange,this);c.Utils.sourceDisable(a,this)},disable:function(){this.el.set("state",h.DISABLED)},enable:function(){this.el.set("state",h.ENABLED)},_vChange:function(a){var b=this.get("editor"),d=a.newVal;a=a.preVal;var r=this.get("styles");b.focus();b.fire("save");if(d==a){r[d].remove(b.document);this.el.set("value","")}else r[d].apply(b.document);b.fire("save")},_selectionChange:function(a){this.get("editor");a=a.path.elements;for(var b=this.get("styles"),d=0,r;d<a.length;d++){r=a[d];
for(var x in b)if(b[x].checkElementRemovable(r,true)){this.el.set("value",x);return}}this.el.reset("value")}});k.ATTRS={editor:{},text:{},contentCls:{},title:{},style:{}};j.extend(k,j.Base,{_init:function(){var a=this.get("editor"),b=this.get("text");this.get("style");var d=this.get("title");this.el=new m({text:b,title:d,contentCls:this.get("contentCls"),container:a.toolBarDiv});this.el.on("offClick",this._on,this);this.el.on("onClick",this._off,this);a.on("selectionChange",this._selectionChange,
this);c.Utils.sourceDisable(a,this)},disable:function(){this.el.set("state",m.DISABLED)},enable:function(){this.el.set("state",m.OFF)},_on:function(){var a=this.get("editor");this.get("text");var b=this.get("style");this.get("title");a.fire("save");b.apply(a.document);a.fire("save");a.notifySelectionChange();a.focus()},_off:function(){var a=this.get("editor");this.get("text");var b=this.get("style");this.get("title");a.fire("save");b.remove(a.document);a.fire("save");a.notifySelectionChange();a.focus()},
_selectionChange:function(a){this.get("editor");this.get("text");var b=this.get("style");this.get("title");var d=this.el;a=a.path;if(d.get("state")!=m.DISABLED)b.checkActive(a)?d.set("state",m.ON):d.set("state",m.OFF)}});g.SingleFont=k;c.Font=g}();e.addPlugin(function(){new c.Font({editor:e,title:"大小",width:"30px",showValue:true,popUpWidth:p.width,styles:t,html:u});new c.Font({editor:e,title:"字体",width:"110px",popUpWidth:q.width,styles:v,html:w});new c.Font.SingleFont({contentCls:"ke-toolbar-bold",
title:"粗体 ",editor:e,style:new l({element:"strong",overrides:[{element:"b"},{element:"span",attributes:{style:"font-weight: bold;"}}]})});new c.Font.SingleFont({contentCls:"ke-toolbar-italic",title:"斜体 ",editor:e,style:new l({element:"em",overrides:[{element:"i"},{element:"span",attributes:{style:"font-style: italic;"}}]})});new c.Font.SingleFont({contentCls:"ke-toolbar-underline",title:"下划线 ",editor:e,style:new l({element:"u",overrides:[{element:"span",attributes:{style:"text-decoration: underline;"}}]})});
new c.Font.SingleFont({contentCls:"ke-toolbar-strikeThrough",title:"删除线 ",editor:e,style:new l({element:"del",overrides:[{element:"span",attributes:{style:"text-decoration: line-through;"}},{element:"s"}]})})})});
