KISSY.add("uibase",function(a){function d(g){b.apply(this,arguments);for(var h=this.constructor;h;){if(g&&g[c]&&h.HTML_PARSER)if(g[c]=a.one(g[c])){var i=g[c],j=h.HTML_PARSER,k=void 0,m=void 0;for(k in j)if(j.hasOwnProperty(k)){m=j[k];if(a.isFunction(m))this.__set(k,m.call(this,i));else if(a.isString(m))this.__set(k,i.one(m));else a.isArray(m)&&m[0]&&this.__set(k,i.all(m[0]))}}h=h.superclass&&h.superclass.constructor}e(this,"initializer","constructor");g&&g.autoRender&&this.render()}function e(g,h,
i){for(var j=g.constructor,k=[],m,n,p;j;){p=[];if(n=j.__ks_exts)for(var o=0;o<n.length;o++)if(m=n[o]){if(i!="constructor")m=n[o].prototype[i];m&&p.push(m)}if(m=j.prototype[h])p.push(m);p.length&&k.push.apply(k,p.reverse());j=j.superclass&&j.superclass.constructor}for(o=k.length-1;o>=0;o--)k[o]&&k[o].call(g)}var c="srcNode",b=a.Base,f=a.Attribute.__capitalFirst,l=function(){};d.HTML_PARSER={};d.ATTRS={render:{valueFn:function(){return document.body}},rendered:{value:false}};a.extend(d,b,{render:function(){if(!this.get("rendered")){this._renderUI();
this.fire("renderUI");e(this,"renderUI","__renderUI");this._bindUI();this.fire("bindUI");e(this,"bindUI","__bindUI");this._syncUI();this.fire("syncUI");e(this,"syncUI","__syncUI");this.set("rendered",true)}},_renderUI:l,renderUI:l,_bindUI:function(){var g=this,h=g.__getDefAttrs(),i,j;for(i in h)if(h.hasOwnProperty(i)){j="_uiSet"+f(i);g[j]&&function(k,m){g.on("after"+f(k)+"Change",function(n){g[m](n.newVal,n)})}(i,j)}},bindUI:l,_syncUI:function(){var g=this.__getDefAttrs(),h;for(h in g)if(g.hasOwnProperty(h)){var i=
"_uiSet"+f(h);this[i]&&this[i](this.get(h))}},syncUI:l,destroy:function(){for(var g=this.constructor,h,i,j;g;){(i=g.prototype.destructor)&&i.apply(this);if(h=g.__ks_exts)for(j=h.length-1;j>=0;j--)(i=h[j]&&h[j].prototype.__destructor)&&i.apply(this);g=g.superclass&&g.superclass.constructor}this.fire("destroy");this.detach()}});d.create=function(g,h,i,j){function k(){d.apply(this,arguments)}if(a.isArray(g)){j=i;i=h;h=g;g=d}g=g||d;a.extend(k,g,i,j);if(h){k.__ks_exts=h;a.each(h,function(m){if(m){a.each(["ATTRS",
"HTML_PARSER"],function(n){if(m[n]){k[n]=k[n]||{};a.mix(k[n],m[n],false)}});a.augment(k,m,false)}})}return k};a.UIBase=d});
KISSY.add("uibase-align",function(a){function d(){}function e(b,f){var l=f.charAt(0),g=f.charAt(1),h,i,j,k;if(b){b=a.one(b);h=b.offset();i=b[0].offsetWidth;j=b[0].offsetHeight}else{h={left:c.scrollLeft(),top:c.scrollTop()};i=c.viewportWidth();j=c.viewportHeight()}k=h.left;h=h.top;if(l==="c")h+=j/2;else if(l==="b")h+=j;if(g==="c")k+=i/2;else if(g==="r")k+=i;return{left:k,top:h}}var c=a.DOM;a.mix(d,{TL:"tl",TC:"tc",TR:"tr",CL:"cl",CC:"cc",CR:"cr",BL:"bl",BC:"bc",BR:"br"});d.ATTRS={align:{}};d.prototype=
{_uiSetAlign:function(b){a.isPlainObject(b)&&this.align(b.node,b.points,b.offset)},align:function(b,f,l){var g,h=this.get("el");l=l||[0,0];g=c.offset(h);b=e(b,f[0]);f=e(h,f[1]);f=[f.left-b.left,f.top-b.top];this.set("xy",[g.left-f[0]+ +l[0],g.top-f[1]+ +l[1]])},center:function(b){this.set("align",{node:b,points:[d.CC,d.CC],offset:[0,0]})}};a.UIBase.Align=d});
KISSY.add("uibase-box",function(a){function d(){a.log("box init")}a.namespace("UIBase");var e=a.Node;a.mix(d,{APPEND:1,INSERT:0});d.ATTRS={el:{setter:function(c){if(a.isString(c))return a.one(c)}},elCls:{},elStyle:{},width:{},height:{},elTagName:{value:"div"},elAttrs:{},elOrder:{value:1},html:{value:false}};d.HTML_PARSER={el:function(c){return c}};d.prototype={__syncUI:function(){a.log("_syncUIBoxExt")},__bindUI:function(){a.log("_bindUIBoxExt")},__renderUI:function(){a.log("_renderUIBoxExt");var c=
this.get("render"),b=this.get("el");c=new e(c);if(!b){b=new e("<"+this.get("elTagName")+">");this.get("elOrder")?c.append(b):c.prepend(b);this.set("el",b)}},_uiSetElAttrs:function(c){a.log("_uiSetElAttrs");c&&this.get("el").attr(c)},_uiSetElCls:function(c){c&&this.get("el").addClass(c)},_uiSetElStyle:function(c){a.log("_uiSetElStyle");c&&this.get("el").css(c)},_uiSetWidth:function(c){a.log("_uiSetWidth");c&&this.get("el").width(c)},_uiSetHeight:function(c){a.log("_uiSetHeight");c&&this.get("el").height(c)},
_uiSetHtml:function(c){a.log("_uiSetHtml");c!==false&&this.get("el").html(c)},__destructor:function(){a.log("box __destructor");var c=this.get("el");if(c){c.detach();c.remove()}}};a.UIBase.Box=d});
KISSY.add("uibase-close",function(a){function d(){a.log("close init")}a.namespace("UIBase");var e=a.Node;d.ATTRS={closable:{value:true},closeBtn:{}};d.HTML_PARSER={closeBtn:".ks-ext-close"};d.prototype={__syncUI:function(){a.log("_syncUICloseExt")},_uiSetClosable:function(c){a.log("_uiSetClosable");var b=this.get("closeBtn");if(b)c?b.show():b.hide()},__renderUI:function(){a.log("_renderUICloseExt");var c=this.get("closeBtn"),b=this.get("contentEl");if(!c&&b){c=(new e("<a href='#' class='ks-ext-close'><span class='ks-ext-close-x'>X</span></a>")).appendTo(b);
this.set("closeBtn",c)}},__bindUI:function(){a.log("_bindUICloseExt");var c=this,b=c.get("closeBtn");b&&b.on("click",function(f){c.hide();f.halt()})},__destructor:function(){a.log("close-ext __destructor");var c=this.get("closeBtn");c&&c.detach()}};a.UIBase.Close=d});
KISSY.add("uibase-constrain",function(a){function d(){a.log("constrain init")}function e(b){var f;if(!b)return f;var l=this.get("el");if(b!==true){b=a.one(b);f=b.offset();a.mix(f,{maxLeft:f.left+b[0].offsetWidth-l[0].offsetWidth,maxTop:f.top+b[0].offsetHeight-l[0].offsetHeight})}else{b=document.documentElement.clientWidth;f={left:c.scrollLeft(),top:c.scrollTop()};a.mix(f,{maxLeft:f.left+b-l[0].offsetWidth,maxTop:f.top+c.viewportHeight()-l[0].offsetHeight})}return f}a.namespace("UIBase");var c=a.DOM;
d.ATTRS={constrain:{value:false}};d.prototype={__bindUI:function(){a.log("_bindUIConstrain")},__renderUI:function(){a.log("_renderUIConstrain");var b=this,f=b.__getDefAttrs(),l=f.x;f=f.y;var g=l.setter,h=f.setter;l.setter=function(i){var j=g&&g(i);if(j===undefined)j=i;if(!b.get("constrain"))return j;i=e.call(b,b.get("constrain"));return Math.min(Math.max(j,i.left),i.maxLeft)};f.setter=function(i){var j=h&&h(i);if(j===undefined)j=i;if(!b.get("constrain"))return j;i=e.call(b,b.get("constrain"));return Math.min(Math.max(j,
i.top),i.maxTop)};b.addAttr("x",l);b.addAttr("y",f)},__syncUI:function(){a.log("_syncUIConstrain")},__destructor:function(){a.log("constrain-ext __destructor")}};a.UIBase.Constrain=d});
KISSY.add("uibase-contentbox",function(a){function d(){a.log("contentbox init")}a.namespace("UIBase");var e=a.Node;d.ATTRS={contentEl:{},contentElAttrs:{},contentTagName:{value:"div"},content:{}};d.HTML_PARSER={contentEl:".ks-contentbox"};d.prototype={__syncUI:function(){a.log("_syncUIContentBox")},__bindUI:function(){a.log("_bindUIContentBox")},__renderUI:function(){a.log("_renderUIContentBox");var c=this.get("contentEl"),b=this.get("el");if(!c){c=(new e("<"+this.get("contentTagName")+" class='ks-contentbox'>")).appendTo(b);
this.set("contentEl",c)}},_uiSetContentElAttrs:function(c){a.log("_uiSetContentElAttrs");c&&this.get("contentEl").attr(c)},_uiSetContent:function(c){a.log("_uiSetContent");c!==undefined&&this.get("contentEl").html(c)},__destructor:function(){a.log("contentbox __destructor")}};a.UIBase.ContentBox=d});
KISSY.add("uibase-drag",function(a){function d(){a.log("drag init")}a.namespace("UIBase");d.ATTRS={handlers:{value:[]},draggable:{value:true}};d.prototype={_uiSetHandlers:function(e){a.log("_uiSetHanlders");e&&e.length>0&&this.__drag.set("handlers",e)},__syncUI:function(){a.log("_syncUIDragExt")},__renderUI:function(){a.log("_renderUIDragExt")},__bindUI:function(){a.log("_bindUIDragExt");var e=this.get("el");this.__drag=new a.Draggable({node:e,handlers:this.get("handlers")})},_uiSetDraggable:function(e){a.log("_uiSetDraggable");
var c=this.__drag;if(e){c.detach("drag");c.on("drag",this._dragExtAction,this)}else c.detach("drag")},_dragExtAction:function(e){this.set("xy",[e.left,e.top])},__destructor:function(){a.log("DragExt __destructor");var e=this.__drag;e&&e.destroy()}};a.UIBase.Drag=d});
KISSY.add("uibase-loading",function(a){function d(){a.log("LoadingExt init")}a.namespace("UIBase");d.prototype={loading:function(){if(!this._loadingExtEl)this._loadingExtEl=(new a.Node("<div class='ks-ext-loading' style='position: absolute;border: none;width: 100%;top: 0;left: 0;z-index: 99999;height:100%;*height: expression(this.parentNode.offsetHeight);'>")).appendTo(this.get("el"));this._loadingExtEl.show()},unloading:function(){var e=this._loadingExtEl;e&&e.hide()}};a.UIBase.Loading=d});
KISSY.add("uibase-mask",function(a){function d(){a.log("mask init")}a.namespace("UIBase");var e,c=a.UA,b=0;d.ATTRS={mask:{value:false}};d.prototype={__bindUI:function(){a.log("_bindUIMask")},__renderUI:function(){a.log("_renderUIMask")},__syncUI:function(){a.log("_syncUIMask")},_uiSetMask:function(f){a.log("_uiSetMask");if(f){this.on("show",this._maskExtShow);this.on("hide",this._maskExtHide)}else{this.detach("show",this._maskExtShow);this.detach("hide",this._maskExtHide)}},_maskExtShow:function(){if(!e){e=
(new a.Node("<div class='ks-ext-mask'>")).prependTo(document.body);e.css({position:"absolute",left:0,top:0,width:c.ie6?a.DOM.docWidth():"100%",height:a.DOM.docHeight()});c.ie==6&&e.append("<iframe style='width:100%;height:expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;'>")}e.css({"z-index":this.get("zIndex")-1});b++;e.show()},_maskExtHide:function(){b--;if(b<=0)b=0;b||e&&e.hide()},__destructor:function(){a.log("mask __destructor")}};a.UIBase.Mask=d});
KISSY.add("uibase-position",function(a){function d(){a.log("position init")}a.namespace("UIBase");var e=document,c=a.Event;d.ATTRS={x:{},y:{},xy:{setter:function(b){var f=a.makeArray(b);if(f.length){f[0]&&this.set("x",f[0]);f[1]&&this.set("y",f[1])}return b}},zIndex:{value:9999},visible:{value:undefined}};d.prototype={__syncUI:function(){a.log("_syncUIPosition")},__renderUI:function(){a.log("_renderUIPosition");var b=this.get("el");b.addClass("ks-ext-position");b.css("display","")},__bindUI:function(){a.log("_bindUIPosition")},
_uiSetZIndex:function(b){a.log("_uiSetZIndex");b!==undefined&&this.get("el").css("z-index",b)},_uiSetX:function(b){a.log("_uiSetX");b!==undefined&&this.get("el").offset({left:b})},_uiSetY:function(b){a.log("_uiSetY");b!==undefined&&this.get("el").offset({top:b})},_uiSetVisible:function(b){if(b!==undefined){a.log("_uiSetVisible");this.get("el").css("visibility",b?"visible":"hidden");this[b?"_bindKey":"_unbindKey"]();this.fire(b?"show":"hide")}},_bindKey:function(){c.on(e,"keydown",this._esc,this)},
_unbindKey:function(){c.remove(e,"keydown",this._esc,this)},_esc:function(b){b.keyCode===27&&this.hide()},move:function(b,f){if(a.isArray(b)){f=b[1];b=b[0]}this.set("xy",[b,f])},show:function(){this._firstShow()},_firstShow:function(){this.render();this._realShow();this._firstShow=this._realShow},_realShow:function(){this.set("visible",true)},hide:function(){this.set("visible",false)},__destructor:function(){a.log("position __destructor")}};a.UIBase.Position=d});
KISSY.add("uibase-shim",function(a){function d(){a.log("shim init")}a.namespace("UIBase");var e=a.Node;d.prototype={__syncUI:function(){a.log("_syncUIShimExt")},__bindUI:function(){a.log("_bindUIShimExt")},__renderUI:function(){a.log("_renderUIShimExt");var c=this.get("el"),b=new e("<iframe style='position: absolute;border: none;width: expression(this.parentNode.offsetWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.offsetHeight);'>");c.prepend(b)},
__destructor:function(){a.log("shim __destructor")}};a.UIBase.Shim=d});
KISSY.add("uibase-stdmod",function(a){function d(){a.log("stdmod init")}a.namespace("UIBase");var e=a.Node;d.ATTRS={header:{},body:{},footer:{},bodyStyle:{},headerContent:{value:false},bodyContent:{value:false},footerContent:{value:false}};d.HTML_PARSER={header:".ks-stdmod-header",body:".ks-stdmod-body",footer:".ks-stdmod-footer"};d.prototype={__bindUI:function(){a.log("_bindUIStdMod")},__syncUI:function(){a.log("_syncUIStdMod")},_setStdModContent:function(c,b){if(b!==false)if(a.isString(b))this.get(c).html(b);
else{this.get(c).html("");this.get(c).append(b)}},_uiSetBodyStyle:function(c){c!==undefined&&this.get("body").css(c)},_uiSetBodyContent:function(c){a.log("_uiSetBodyContent");this._setStdModContent("body",c)},_uiSetHeaderContent:function(c){a.log("_uiSetHeaderContent");this._setStdModContent("header",c)},_uiSetFooterContent:function(c){a.log("_uiSetFooterContent");this._setStdModContent("footer",c)},__renderUI:function(){a.log("_renderUIStdMod");var c=this.get("contentEl"),b=this.get("header"),f=
this.get("body"),l=this.get("footer");this.get("headerContent");this.get("bodyContent");this.get("footerContent");if(!b){b=(new e("<div class='ks-stdmod-header'>")).appendTo(c);this.set("header",b)}if(!f){f=(new e("<div class='ks-stdmod-body'>")).appendTo(c);this.set("body",f)}if(!l){l=(new e("<div class='ks-stdmod-footer'>")).appendTo(c);this.set("footer",l)}},__destructor:function(){a.log("stdmod __destructor")}};a.UIBase.StdMod=d});KISSY.Editor.add("uibase",function(){});
