KISSY.Editor.add("flashutils",function(){var k=KISSY,n=k.Editor,l=n.Utils.flash;if(!l){var f=k.DOM,o=k.Node,s=k.UA;l={getUrl:function(b){var c="",d=n.NODE;if(b._4e_name()=="object"){b=b[0].childNodes;for(var a=0;a<b.length;a++)if(b[a].nodeType==d.NODE_ELEMENT)if((f.attr(b[a],"name")||"").toLowerCase()=="movie")c=f.attr(b[a],"value");else if(f._4e_name(b[a])=="embed")c=f.attr(b[a],"src");else if(f._4e_name(b[a])=="object")c=f.attr(b[a],"data")}else if(b._4e_name()=="embed")c=b.attr("src");return c},
createSWF:function(b,c,d){var a=c.attrs;c=c.flashVars;var g="",e="";d=d||document;a=a||{};a.wmode="transparent";for(var h in a)if(a.hasOwnProperty(h))g+=h+"='"+a[h]+"' ";if(c){for(var i in c)if(c.hasOwnProperty(i))e+="&"+i+"="+encodeURIComponent(c[i]);e=e.substring(1)}b="<object "+g+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" ><param name="quality" value="high" /><param name="movie" value="'+b+'" />'+(e?'<param name="flashVars" value="'+e+'"/>':"")+"<embed "+g+" "+(e?'FlashVars="'+e+'"':
"")+' pluginspage="http://www.macromedia.com/go/getflashplayer"  quality="high"  src="'+b+'"  type="application/x-shockwave-flash"/></object>';return{el:new o(b,null,d),html:b}},createSWFRuntime2:function(b,c,d){d=d||document;var a=(new o("<div style='width:0;height:0;overflow:hidden;'>",null,d)).appendTo(d.body);a=l.createSWF.apply(this,arguments).el.appendTo(a);s.ie||(a=a.one("object"));return a[0]},createSWFRuntime:function(b,c,d){var a=c.attrs||{},g=c.flashVars||{},e=c.params||{},h="",i="",j=
"";d=d||document;a.id=a.id||k.guid("ke-runtimeflash-");for(var p in a)if(a.hasOwnProperty(p))h+=p+"='"+a[p]+"' ";for(var q in e)if(e.hasOwnProperty(q))i+="<param name='"+q+"' value='"+e[q]+"'/>";for(var r in g)if(g.hasOwnProperty(r))j+="&"+r+"="+encodeURIComponent(g[r]);j=j.substring(1);b=s.ie?"<object "+h+' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" >'+i+'<param name="movie" value="'+b+'" />'+(j?'<param name="flashVars" value="'+j+'" />':"")+"</object>":"<object type='application/x-shockwave-flash' data='"+
b+"' "+h+">"+i+(j?'<param name="flashVars" value="'+j+'"/>':"")+"</object>";var m=c.holder;if(!m){m=(new o("<div style='"+(c.style?c.style:"width:1px;height:1px;position:absolute;"+ +"overflow:hidden;")+"'>",null,d)).appendTo(d.body);setTimeout(function(){m.offset({left:f.scrollLeft(),top:f.scrollTop()})},100)}m.html(b);return d.getElementById(a.id)}};n.Utils.flash=l}});
