KISSY.Editor.add("flash",function(d){var g=KISSY,c=g.Editor,e=d.htmlDataProcessor,h=d.cfg.pluginConfig,i=e&&e.dataFilter;i&&i.addRules({elements:{object:function(a){var b=a.attributes;if(!(b.classid&&String(b.classid).toLowerCase())){for(b=0;b<a.children.length;b++)if(a.children[b].name=="embed"){if(!c.Utils.isFlashEmbed(a.children[b]))break;return e.createFakeParserElement(a,"ke_flash","flash",true)}return null}return e.createFakeParserElement(a,"ke_flash","flash",true)},embed:function(a){if(!c.Utils.isFlashEmbed(a))return null;
return e.createFakeParserElement(a,"ke_flash","flash",true)}}},5);var f;if(!h.flash||h.flash.btn!==false)f=d.addButton("flash",{contentCls:"ke-toolbar-flash",title:"\u63d2\u5165Flash",mode:c.WYSIWYG_MODE,loading:true});c.use("flash/support",function(){var a=new c.Flash(d);d.addCommand("insertFlash",{exec:function(){var b=g.makeArray(arguments);return c.Flash.Insert.apply(null,b)}});f&&f.reload({offClick:function(){a.show()}})})});
