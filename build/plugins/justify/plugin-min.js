KISSY.Editor.add("justify",function(c){var d=KISSY,i=d.Editor,k=i.TripleButton,l=/(-moz-|-webkit-|start|auto)/gi;c.ready(function(){var h={mode:i.WYSIWYG_MODE,offClick:function(){this.call("_change")},onClick:function(){this.call("_change")},_change:function(){var a=this.editor,b=a.getSelection(),m=this.btn.get("state");if(b){var n=b.createBookmarks(),j=b.getRanges(),f,e;a.fire("save");for(var g=j.length-1;g>=0;g--){f=j[g].createIterator();for(f.enlargeBr=true;e=f.getNextParagraph();){e.removeAttr("align");
m==k.OFF?e.css("text-align",this.cfg.v):e.css("text-align","")}}a.notifySelectionChange();b.selectBookmarks(n);a.fire("save")}},selectionChange:function(a){var b=this.btn;a=a.path;a=a.block||a.blockLimit;if(!a||a._4e_name()==="body")b.boff();else(a.css("text-align").replace(l,"")||"left")==this.cfg.v?b.bon():b.boff()}};c.addButton("alignleft",d.mix({contentCls:"ke-toolbar-alignleft",title:"\u5de6\u5bf9\u9f50",v:"left"},h));c.addButton("aligncenter",d.mix({contentCls:"ke-toolbar-aligncenter",title:"\u5c45\u4e2d\u5bf9\u9f50",v:"center"},
h));c.addButton("alignright",d.mix({contentCls:"ke-toolbar-alignright",title:"\u53f3\u5bf9\u9f50",v:"right"},h))})});
