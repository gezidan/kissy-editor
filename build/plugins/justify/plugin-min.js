KISSY.Editor.add("justify",function(d){var c=KISSY.Editor,m=KISSY,e=c.TripleButton;c.Justify||function(){function k(a,b,g,h){this.editor=a;this.v=b;this.contentCls=h;this.title=g;this._init()}var n=/(-moz-|-webkit-|start|auto)/i;m.augment(k,{_init:function(){var a=this.editor;this.el=new e({contentCls:this.contentCls,title:this.title,container:a.toolBarDiv});a.on("selectionChange",this._selectionChange,this);this.el.on("click",this._effect,this)},_effect:function(){var a=this.editor,b=a.getSelection(),
g=this.el.get("state");if(b){var h=b.createBookmarks(),l=b.getRanges(),i,f;a.fire("save");for(var j=l.length-1;j>=0;j--){i=l[j].createIterator();for(i.enlargeBr=true;f=i.getNextParagraph();){f.removeAttr("align");g==e.OFF?f.css("text-align",this.v):f.css("text-align","")}}a.notifySelectionChange();b.selectBookmarks(h);a.fire("save")}},_selectionChange:function(a){var b=this.el;a=a.path;if(a=a.block||a.blockLimit){a=a.css("text-align").replace(n,"");a==this.v||!a&&this.v=="left"?b.set("state",e.ON):
b.set("state",e.OFF)}}});c.Justify=k}();d.addPlugin(function(){new c.Justify(d,"left","\u5de6\u5bf9\u9f50 ","ke-toolbar-alignleft");new c.Justify(d,"center","\u5c45\u4e2d\u5bf9\u9f50 ","ke-toolbar-aligncenter");new c.Justify(d,"right","\u53f3\u5bf9\u9f50 ","ke-toolbar-alignright")})});
