KISSY.Editor.add("bangpai-upload",function(h){var c=KISSY,d=c.Editor;if(!d.BangPaiUpload){(function(){function e(a){this.editor=a;this._init()}var f=[],k=d.Config.base+d.Utils.debugUrl("biz/bangpai/plugins/upload/uploader.swf"),g=c.Node;c.augment(e,c.EventTarget,{_init:function(){var a=this.editor.cfg.pluginConfig["bangpai-upload"].holder,b=c.isString(a)?c.one(a):a;a=(new g("<p><button disabled='disabled'>\u9009\u62e9\u6587\u4ef6</button></p>")).appendTo(b).one("button");var l=(new g("<div>")).appendTo(b);
b=(new g("<p><button>\u5f00\u59cb\u4e0a\u4f20</button></p>")).appendTo(b);var i=c.guid("ke-bangpai-upload"),j=a.offset();f[i]=this;this.btn=a;this.up=b;this.on("contentReady",this._ready,this);this.flash=d.Utils.flash.createSWFRuntime(k,{style:"position:absolute;top:"+j.top+"px;left:"+j.left+"px;width:"+a.width()+"px;height:"+a.height()+"px;z-index:9999;",attrs:{allowScriptAccess:"always",allowNetworking:"all",scale:"noScale",width:a.width(),height:a.height()},flashVars:{allowedDomain:location.hostname,
shareData:true,swfID:i,jsEntry:"KISSY.Editor.BangPaiUpload.EventHandler",browser:"ke-bangpai-upload",useCompression:true,hand:true,btn:true}});this._list=l;this.on("select",this._onSelect,this)},_onSelect:function(){},_ready:function(){var a=this.flash;this.btn[0].disabled=false;a.browse(false,[{desc:"\u56fe\u7247\u6587\u4ef6( png,jpg,jpeg,gif )",ext:"*.jpeg;*.jpg;*.png;*.gif"}])},_eventHandler:function(a){var b=a.type;if(b==="log")c.log(a.message);else b&&this.fire(b,a)}});e.EventHandler=function(a,
b){f[a]._eventHandler.call(f[a],b)};d.BangPaiUpload=e})();h.addPlugin(function(){new d.BangPaiUpload(h)})}},{attach:false,requires:["flashutils"]});
