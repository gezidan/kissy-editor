KISSY.add("editor",function(c,n){function i(d,l){var e=this;if(!(e instanceof i))return new i(d,l);if(c.isString(d))d=c.one(d);d[0]||(d=new Node(d));l=l||{};l.pluginConfig=l.pluginConfig||{};e.cfg=l;c.app(e,c.EventTarget);e.use=function(f){if(c.isString(f))f=f.split(",");var o=f;f=[];f=c.indexOf("separator",o);var p=f!=-1;f=o.splice(0,p?f+1:o.length);p&&f.pop();f.length!=0?c.use.call(e,f.join(","),function(){p&&e.addPlugin(function(){i.Utils.addSeparator(e.toolBarDiv)});e.use(o)},{order:true,global:i}):
e.on("dataReady",function(){e.setData(d.val());e.fire("save")});return e};e.init(d);return n}function m(d){if(!r)return d.replace(/\.(js|css)/i,"-min.$1");if(r==="dev")return"../src/"+d;return d}c.app(i,c.EventTarget);i.Config.base=c.Config.base+"editor/";var r=c.Config.debug,k={htmlparser:{attach:false,path:m("plugins/htmldataprocessor/htmlparser/htmlparser.js")}},q=["utils","focusmanager","definition","dtd","dom","elementpath","walker","range","domiterator","selection","styles"],s=["clipboard",
{name:"color"},{name:"elementpaths"},"enterkey","fakeobjects",{name:"flash",requires:["flashsupport"]},{name:"flashsupport",requires:["contextmenu","fakeobjects","overlay","bubbleview"]},{name:"font",requires:["select"]},"format",{name:"htmldataprocessor",requires:["htmlparser-text"]},{name:"image",requires:["overlay","contextmenu","bubbleview"]},"indent","justify",{name:"link",requires:["bubbleview"]},"list","maximize",{name:"music",requires:["flashsupport"]},"preview","removeformat",{name:"smiley"},
"sourcearea",{name:"table",requires:["overlay","contextmenu"]},{name:"templates",requires:["overlay"]},"undo",{name:"resize",requires:["dd"]}],t=[{name:"htmlparser-basicwriter",requires:["htmlparser"]},{name:"htmlparser-element",requires:["htmlparser-fragment"]},{name:"htmlparser-filter",requires:["htmlparser-element"]},{name:"htmlparser-fragment",requires:["htmlparser-htmlwriter"]},{name:"htmlparser-htmlwriter",requires:["htmlparser-basicwriter"]},{name:"htmlparser-text",requires:["htmlparser-comment"]},
{name:"htmlparser-comment",requires:["htmlparser-filter"]}],u=[{name:"button"},{name:"dd"},{name:"overlay",requires:["dd"]},{name:"contextmenu",requires:["overlay"]},{name:"bubbleview",requires:["overlay"]},{name:"select",requires:["overlay"]}],b,j,a,g,h;b=0;for(j=u.length;b<j;b++){g=a=u[b];h=n;if(!c.isString(a)){h=a.requires;g=a.name}k[g]={attach:false,requires:h,path:m("ui/"+g+".js"),csspath:a.useCss?m("ui/"+g+".css"):""}}b=0;for(j=s.length;b<j;b++){g=a=s[b];h=["button"];if(!c.isString(a)){a.requires&&
(h=h.concat(a.requires));g=a.name}k[g]={attach:false,requires:h,csspath:a.useCss?m("plugins/"+g+"/plugin.css"):n,path:m("plugins/"+g+"/plugin.js")}}b=0;for(j=t.length;b<j;b++){a=t[b];h=n;if(!c.isString(a)){h=a.requires;a=a.name}k[a]={attach:false,requires:h,path:m("plugins/htmldataprocessor/htmlparser/"+a.substring(11)+".js")}}i.add(k);k={};b=0;for(j=q.length;b<j;b++){a=q[b];k[a]={host:"editor",requires:b>0?q[b-1]:[]}}i.add(k);c.Editor=i});
