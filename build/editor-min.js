KISSY.add("editor",function(a,w){function i(c,k){function x(d){for(var m=i.Env.mods,g=0;g<d.length;g++){for(var e=d[g],j=false,n=0;n<g;n++)if(e==d[n]){j=true;break}n=m[e];if(j&&n){j=a.clone(n);e=e+"_"+g;j.name=e;d[g]=e;m[e]||(m[e]=j)}}}var b=this;if(!(b instanceof i))return new i(c,k);if(a.isString(c))c=a.one(c);c=y._4e_wrap(c);k=k||{};k.pluginConfig=k.pluginConfig||{};b.cfg=k;a.app(b,a.EventTarget);var r=["htmldataprocessor","enterkey","clipboard"],q=false;b.use=function(d,m){d=d.split(",");x(d);
if(!q)for(var g=0;g<r.length;g++){var e=r[g];a.inArray(e,d)||d.unshift(e)}a.use.call(b,d.join(","),function(){b.ready(function(){m&&m.call(b);if(!q){b.setData(c.val());if(k.focus)b.focus();else{var j=b.getSelection();j&&j.removeAllRanges()}b.fire("save");q=true}})},{order:true,global:i});return b};b.init(c);return b}function s(c){if(!t)return c.replace(/\.(js|css)/i,"-min.$1");if(t==="dev")return"../src/"+c;return c}var y=a.DOM;a.app(i,a.EventTarget);i.Config.base=a.Config.base+"editor/";var t=a.Config.debug,
l=["separator","sourcearea/support","tabs","flashbridge","flashutils","clipboard",{name:"colorsupport",requires:["overlay"]},{name:"forecolor",requires:["colorsupport"]},{name:"bgcolor",requires:["colorsupport"]},{name:"elementpaths"},"enterkey",{name:"pagebreak",requires:["fakeobjects"]},{name:"fakeobjects",requires:["htmldataprocessor"]},{name:"draft",requires:["localStorage"]},{name:"flash",requires:["flash/support"]},{name:"flash/dialog",requires:["flash"]},{name:"flash/support",requires:["flashutils",
"contextmenu","fakeobjects","bubbleview"]},{name:"font",requires:["select"]},"format",{name:"htmldataprocessor"},{name:"image",requires:["contextmenu","bubbleview"]},{name:"image/dialog",requires:["tabs"]},"indent","justify",{name:"link",requires:["bubbleview"]},{name:"link/dialog"},"list","maximize",{name:"music",requires:["flash/support"]},{name:"music/dialog",requires:["flash/dialog"]},"preview","removeformat",{name:"smiley"},{name:"sourcearea",requires:["sourcearea/support"]},{name:"table",requires:["contextmenu"]},
{name:"table/dialog"},{name:"templates",requires:["overlay"]},"undo",{name:"resize",requires:["dd"]}],h,p,f,o,u={};h=0;for(p=l.length;h<p;h++){f=l[h];if(a.isString(f))f=l[h]={name:f};o=f.requires||[];var v=["button"];f.name.indexOf("/dialog")!=-1&&v.push("overlay");f.requires=o.concat(v)}l=[{name:"localStorage",requires:["flashutils","flashbridge"]},{name:"button"},{name:"dd"},{name:"progressbar"},{name:"overlay",requires:["dd"]},{name:"contextmenu",requires:["overlay"]},{name:"bubbleview",requires:["overlay"]},
{name:"select",requires:["overlay"]}].concat(l);h=0;for(p=l.length;h<p;h++){f=l[h];o=f.name;u[o]={attach:false,charset:"utf-8",requires:f.requires,csspath:f.useCss?s("plugins/"+o+"/plugin.css?t="+encodeURIComponent("2010-10-26 18:53:15")+""):w,path:s("plugins/"+o+"/plugin.js?t="+encodeURIComponent("2010-10-26 18:53:15")+"")}}i.add(u);a.Editor=i;a.log(["utils","focusmanager","definition","dtd","dom","elementpath","walker","range","domiterator","selection","styles","htmlparser","htmlparser-basicwriter","htmlparser-comment",
"htmlparser-element","htmlparser-filter","htmlparser-fragment","htmlparser-htmlwriter","htmlparser-text"])});
