KISSY.add("editor",function(c,t){function j(d,l){function x(e){for(var m=j.Env.mods,h=0;h<e.length;h++){for(var f=e[h],o=false,n=0;n<h;n++)if(f==e[n]){o=true;break}n=m[f];if(o&&n){o=c.clone(n);f=f+"_"+h;o.name=f;e[h]=f;m[f]||(m[f]=o)}}}var g=this;if(!(g instanceof j))return new j(d,l);if(c.isString(d))d=c.one(d);d=y._4e_wrap(d);l=l||{};l.pluginConfig=l.pluginConfig||{};g.cfg=l;c.app(g,c.EventTarget);var u=["htmldataprocessor","enterkey","clipboard"];g.use=function(e,m){e=e.split(",");x(e);for(var h=
0;h<u.length;h++){var f=u[h];c.inArray(f,e)||e.unshift(f)}c.use.call(g,e.join(","),function(){g.ready(function(){m&&m.call(g);g.setData(d.val());g.fire("save")})},{order:true,global:j});return g};g.init(d)}function p(d){if(!v)return d.replace(/\.(js|css)/i,"-min.$1");if(v==="dev")return"../src/"+d;return d}var y=c.DOM;c.app(j,c.EventTarget);j.Config.base=c.Config.base+"editor/";var v=c.Config.debug,q={htmlparser:{attach:false,path:p("plugins/htmldataprocessor/htmlparser/htmlparser.js")}},s=["utils",
"focusmanager","definition","dtd","dom","elementpath","walker","range","domiterator","selection","styles"],i=["separator","sourceareasupport","tabs","flashbridge","flashutils","clipboard",{name:"colorsupport",requires:["overlay"]},{name:"forecolor",requires:["colorsupport"]},{name:"bgcolor",requires:["colorsupport"]},{name:"elementpaths"},"enterkey",{name:"pagebreak",requires:["fakeobjects"]},{name:"fakeobjects",requires:["htmldataprocessor"]},{name:"draft",requires:["localStorage"]},{name:"flash",
requires:["flashsupport"]},{name:"flashsupport",requires:["flashutils","contextmenu","fakeobjects","overlay","bubbleview"]},{name:"font",requires:["select"]},"format",{name:"htmldataprocessor",requires:["htmlparser-text"]},{name:"image",requires:["overlay","contextmenu","bubbleview","tabs"]},"indent","justify",{name:"link",requires:["bubbleview"]},"list","maximize",{name:"music",requires:["flashsupport"]},"preview","removeformat",{name:"smiley"},{name:"sourcearea",requires:["sourceareasupport"]},
{name:"table",requires:["overlay","contextmenu"]},{name:"templates",requires:["overlay"]},"undo",{name:"resize",requires:["dd"]}],w=[{name:"htmlparser-basicwriter",requires:["htmlparser"]},{name:"htmlparser-element",requires:["htmlparser-fragment"]},{name:"htmlparser-filter",requires:["htmlparser-element"]},{name:"htmlparser-fragment",requires:["htmlparser-htmlwriter"]},{name:"htmlparser-htmlwriter",requires:["htmlparser-basicwriter"]},{name:"htmlparser-text",requires:["htmlparser-comment"]},{name:"htmlparser-comment",
requires:["htmlparser-filter"]}],b,k,a,r;b=0;for(k=i.length;b<k;b++){a=i[b];if(c.isString(a))a=i[b]={name:a};a.requires=a.requires||[];a.requires=a.requires.concat(["button"])}i=[{name:"localStorage",requires:["flashutils","flashbridge"]},{name:"button"},{name:"dd"},{name:"progressbar"},{name:"overlay",requires:["dd"]},{name:"contextmenu",requires:["overlay"]},{name:"bubbleview",requires:["overlay"]},{name:"select",requires:["overlay"]}].concat(i);b=0;for(k=i.length;b<k;b++){a=i[b];r=a.name;q[r]=
{attach:false,requires:a.requires,csspath:a.useCss?p("plugins/"+r+"/plugin.css"):t,path:p("plugins/"+r+"/plugin.js")}}b=0;for(k=w.length;b<k;b++){a=w[b];i=t;if(!c.isString(a)){i=a.requires;a=a.name}q[a]={attach:false,requires:i,path:p("plugins/htmldataprocessor/htmlparser/"+a.substring(11)+".js")}}b=0;for(k=s.length;b<k;b++){a=s[b];q[a]={host:"editor",requires:b>0?s[b-1]:[]}}j.add(q);c.Editor=j});
