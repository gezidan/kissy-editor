KISSY.add("editor",function(c,o){function h(e,j){var d=this;if(!(d instanceof h))return new h(e,j);if(c.isString(e))e=c.one(e);e=t._4e_wrap(e);j=j||{};j.pluginConfig=j.pluginConfig||{};d.cfg=j;c.app(d,c.EventTarget);d.use=function(f){if(c.isString(f))f=f.split(",");var k=f;f=[];f=c.indexOf("separator",k);var p=f!=-1;f=k.splice(0,p?f+1:k.length);p&&f.pop();f.length!=0?c.use.call(d,f.join(","),function(){p&&d.addPlugin(function(){h.Utils.addSeparator(d.toolBarDiv)});d.use(k)},{order:true,global:h}):
d.on("dataReady",function(){d.setData(e.val());d.fire("save")});return d};d.init(e);return o}function l(e){if(!r)return e.replace(/\.(js|css)/i,"-min.$1");if(r==="dev")return"../src/"+e;return e}var t=c.DOM;c.app(h,c.EventTarget);h.Config.base=c.Config.base+"editor/";var r=c.Config.debug,m={htmlparser:{attach:false,path:l("plugins/htmldataprocessor/htmlparser/htmlparser.js")}},q=["utils","focusmanager","definition","dtd","dom","elementpath","walker","range","domiterator","selection","styles"],g=["flashutils",
"clipboard",{name:"color"},{name:"elementpaths"},"enterkey",{name:"fakeobjects",requires:["htmldataprocessor"]},{name:"draft",requires:["localStorage"]},{name:"flash",requires:["flashsupport"]},{name:"flashsupport",requires:["flashutils","contextmenu","fakeobjects","overlay","bubbleview"]},{name:"font",requires:["select"]},"format",{name:"htmldataprocessor",requires:["htmlparser-text"]},{name:"image",requires:["overlay","contextmenu","bubbleview"]},"indent","justify",{name:"link",requires:["bubbleview"]},
"list","maximize",{name:"music",requires:["flashsupport"]},"preview","removeformat",{name:"smiley"},"sourcearea",{name:"table",requires:["overlay","contextmenu"]},{name:"templates",requires:["overlay"]},"undo",{name:"resize",requires:["dd"]}],s=[{name:"htmlparser-basicwriter",requires:["htmlparser"]},{name:"htmlparser-element",requires:["htmlparser-fragment"]},{name:"htmlparser-filter",requires:["htmlparser-element"]},{name:"htmlparser-fragment",requires:["htmlparser-htmlwriter"]},{name:"htmlparser-htmlwriter",
requires:["htmlparser-basicwriter"]},{name:"htmlparser-text",requires:["htmlparser-comment"]},{name:"htmlparser-comment",requires:["htmlparser-filter"]}],b,i,a,n;b=0;for(i=g.length;b<i;b++){a=g[b];if(c.isString(a))a=g[b]={name:a};a.requires=a.requires||[];a.requires=a.requires.concat(["button"])}g=[{name:"localStorage",requires:["flashutils"]},{name:"button"},{name:"dd"},{name:"overlay",requires:["dd"]},{name:"contextmenu",requires:["overlay"]},{name:"bubbleview",requires:["overlay"]},{name:"select",
requires:["overlay"]}].concat(g);b=0;for(i=g.length;b<i;b++){a=g[b];n=a.name;m[n]={attach:false,requires:a.requires,csspath:a.useCss?l("plugins/"+n+"/plugin.css"):o,path:l("plugins/"+n+"/plugin.js")}}b=0;for(i=s.length;b<i;b++){a=s[b];g=o;if(!c.isString(a)){g=a.requires;a=a.name}m[a]={attach:false,requires:g,path:l("plugins/htmldataprocessor/htmlparser/"+a.substring(11)+".js")}}b=0;for(i=q.length;b<i;b++){a=q[b];m[a]={host:"editor",requires:b>0?q[b-1]:[]}}h.add(m);c.Editor=h});
